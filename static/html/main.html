<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tous les MRI en cours</title>
  <link rel="stylesheet" href="static/style/main.css" />
  <link rel="stylesheet" href="static/style/mri.css" />
  <script src="/static/assets/jquery.js"></script>
  <script>
    $(function () {
      $("#navbar").load("/static/html/navbar.html", function () {
        $("#accueil").addClass("active");
      });
    });
    $(function () {
      $("#logovecteur").load("/static/html/logovecteur.html");
    });
  </script>
</head>

<body>
  <div id="navbar"></div>
  <br />
  <br />
  <br />
  <header class="py-6 space-y-6">
    <h1
      class="font-semibold text-center bg-gradient-to-r from-primary to-destructive w-fit m-auto text-transparent bg-clip-text"
    >
      Telecom Etude
    </h1>
    <h2 class="text-center">Toutes les études en recherche d'intervenants</h2>
    <p style="text-align: center">Cliquez pour plus de détails</p>
  </header>
  <br />
  <div id="mri_grid">
    <button class="mri_item" onclick="location.href='/static/html/view_exemple.html';">
      <div class="mri_title">
        <h1>
          Réalisation du Backend d'une application mobile de gestion de
          brocantes
        </h1>
        <div class="mri_category">
          <span> DOMAINE : Application Mobile </span>
          <span> RÉTRIBUTION : 3400€-4000€ </span>
          <span> DIFFICULTÉ : Elevée </span>
        </div>
      </div>
      <div class="mri_desc_div">
        <h3>Description :</h3>
        <p class="mri_desc">
          Bonjour à toutes et à tous,
          <br>
          Nous vous proposons aujourd'hui une étude
          de réalisation du backend d'une application mobile. L'application
          existe déjà, mais possède un code comportant trop de problèmes.
          L'objectif serait donc de refaire l'application. C'est une application
          de gestion de brocante.
        </p>
      </div>
      <a class="more_info">Plus d'infos / Postuler...</a>
    </button>
    <button class="mri_item"onclick="location.href='/static/html/view_exemple_2.html';">
      <div class="mri_title">
        <h1>
          Réalisation d'un cahier des charges anticipant le développement d'un
          outil pour une société de l’économie sociale et solidaire
        </h1>
        <div class="mri_category">
          <span> DOMAINE : Développement Web </span>
          <span> RÉTRIBUTION : 880€ </span>
          <span> Difficulté : Moyenne </span>
        </div>
      </div>
      <div class="mri_desc_div">
        <h3>Description :</h3>
        <p class="mri_desc">
          Bonjour à toutes et à tous,
          <br>
          Le client est spécialisé dans
          l’accompagnement des personnes âgées pour l’adaptation de leur lieu de
          vie, et souhaiterait développer une plateforme collaborative afin de
          centraliser et simplifier la gestion de l'accompagnement à domicile.
        </p>
        
      </div>
      <a class="more_info">Plus d'infos / Postuler...</a>
    </button>
  </div>
</body>

<script>

function fetchMri(){
  let xml = new XMLHttpRequest;
  xml.onreadystatechange = function () {
    if (this.readyState == 4 && this.status == 200) {
      generateView(this.responseText);
    }
  }
  xml.open("GET", "/get_mri", true);
  xml.send();
}

function generateView(mris){
  let mri_list = JSON.parse(mris);
  let mri_grid = document.getElementById("mri_grid");
  for (let i = 0; i < mri_list.length; i++) {
    let mri_item = document.createElement("button");
    mri_item.classList.add("mri_item");
    mri_item.onclick = function () {
      location.href = "/view/"+mri_list["_id"];
    };

    let mri_title = document.createElement("div");
    mri_title.classList.add("mri_title");
    let title = document.createElement("h1");
    title.innerHTML = mri_list[i].title;
    mri_title.appendChild(title);
    let mri_category = document.createElement("div");
    mri_category.classList.add("mri_category");
    let domaine = document.createElement("span");
    domaine.textContent = "Domaine : " +mri_list[i].domaine;
    mri_category.appendChild(domaine);
    let retribution = document.createElement("span");
    retribution.textContent = "Rétribution : " +mri_list[i].retribution;
    mri_category.appendChild(retribution);
    let difficulty = document.createElement("span");
    difficulty.textContent = "Difficulté : " +mri_list[i].difficulty;
    mri_category.appendChild(difficulty);
    mri_title.appendChild(mri_category);
    mri_item.appendChild(mri_title);
    

    let mri_desc_div = document.createElement("div");
    mri_desc_div.classList.add("mri_desc_div");
    let mri_desc_intro = document.createElement("h3");
    mri_desc_intro.textContent = "Description : ";
    let mri_desc = document.createElement("p");
    mri_desc.classList.add("mri_desc");
    mri_desc.innerHTML = mri_list[i].description;
    mri_desc_div.appendChild(mri_desc_intro);
    mri_desc_div.appendChild(mri_desc);
    mri_item.appendChild(mri_desc_div);

    let more_info = document.createElement("a");
    more_info.classList.add("more_info");
    more_info.textContent = "Plus d'infos / Postuler...";
    mri_item.appendChild(more_info);
    
    mri_grid.appendChild(mri_item);

  }
}
</script>